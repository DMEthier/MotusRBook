# Appendix B - Troubleshooting {#appendixB}

As a first step, always ensure you are using the latest version of the motus package (see chapter \@ref(checkVersion)), and you have all required packages installed, loaded, and up to date (see Chapter \@ref(loadingPackages).  

While attempting to download data with the motus package, you may encounter errors, many of which are likely due to an interrupted connection - **always ensure you are connected to the internet when using the tagme() function**.  Most issues can be solved by either logging out of the motus package, or by restarting R and resuming the download using tagme(). If errors persist and you are unable to download your data, the server may be temporarily offline. Please contact Motus with any concerns motus@birdscanada.org.

## Logging out of motus {#motusLogout}
```{r motusLogout, eval = FALSE}
motusLogout()
```

## Resume data download {#resumeDownload}

To resume your data download, run tagme() again, but do not include "new = TRUE":

```{r tagmeResume, eval = FALSE}
tagme(project.num, update = TRUE, dir = ...)
```

## Common error messages and solutions:

### I get the message "Auto-disconnecting SQLiteConnection" one or multiple times after using tagme()

If this occurs after data download has finished, this message can be ignored. If it occurs during an active download, the connection will usually be maintained and the download will continue. However if the download stops, simply run tagme() again. If that does not work, we suggest logging out of the motus package or restarting R (see sections \@ref(motusLogout) and \@ref(resumeDownload)).

### I get an "Internal Server Error" message when using tagme(..., update = TRUE)

If you get this message while updating your .motus file, use tagme() again to continue the download.

### I get an "Error: Forbidden" message when using tagme()

This error may occur if you are attempting to download multiple projects simultaneously from the same user account. If you get this error, please logout of the motus package, and try tagme() again (see sections \@ref(motusLogout) and \@ref(resumeDownload)).

### I get an error Object 'xxxx' not found, referring to a table or field name, or some of your examples in the book do not work.  

Be sure to start the steps from the top of the chapter and run them in sequential order. Another possibility is that your .motus database hasn't been updated to support the latest version of the motusClient or the motus package. If the checkVersion function returns a warning, this may indicate that the internal function used to update your database has not been triggered by tagme(). This can happen, for example, if you load the motusClient package without also loading the motus package. Loading the motus package will also load motusClient, so you should only ever need load motus into your R library. 

To ensure that your .motus file is up-to-date with the motus package:

```{r checkVersion, eval = FALSE}
sql.motus <- tagme(project.num, dir= ...)
checkVersion(sql.motus)
```

To correct any warnings, you should follow these steps:

1. download the latest versions of the motusClient and then the motus package (refer to Chapter \@ref(loadingPackages)).
2. terminate and restart your R session.
3. load the motus library using 'require(Motus)' in your R console.
4. load your sqlite file. Look for notes on the console indicating that your database is being updated.
5. check the version again.

```{r checkVersionFix, eval = FALSE}
library(motus)
sql <- tagme(project.num, dir= ...)
checkVersion(sql)
```

Of course, there is always the possibility that the book contains errors! If this does not work, please contact motus@birdscanada.org.